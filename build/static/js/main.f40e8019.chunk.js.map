{"version":3,"sources":["TextEditor.js","App.js","reportWebVitals.js","index.js"],"names":["TOOLBAR_OPTIONS","header","font","list","color","background","align","TextEditor","documentId","useParams","id","useState","socket","setSocket","quill","setQuill","useEffect","s","io","disconnect","once","document","setContents","enable","emit","interval","setInterval","getContents","clearInterval","handler","delta","updateContents","on","off","oldDelta","source","wrapperRef","useCallback","wrapper","innerHTML","editor","createElement","append","q","Quill","theme","modules","toolbar","disable","setText","className","ref","App","path","exact","to","uuidV4","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"uNASMA,EAAkB,CACtB,CAAC,CAAEC,OAAQ,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,GAAG,KAC9B,CAAC,CAAEC,KAAM,KACT,CAAC,CAAEC,KAAM,WAAa,CAAEA,KAAM,WAC9B,CAAC,OAAQ,SAAU,aACnB,CAAC,CAAEC,MAAO,IAAM,CAAEC,WAAY,KAC9B,CAAC,CAAEC,MAAO,KACV,CAAC,QAAS,aAAc,cACxB,CAAC,UA0FYC,MAvFf,WACE,IAAYC,EAAeC,cAAnBC,GAER,EAA4BC,qBAA5B,mBAAOC,EAAP,KAAeC,EAAf,KAEA,EAA0BF,qBAA1B,mBAAOG,EAAP,KAAcC,EAAd,KAIAC,qBAAU,WACR,IAAMC,EAAIC,aAAG,yBAEb,OADAL,EAAUI,GACH,WACLA,EAAEE,gBAEH,IAEFH,qBAAU,WACK,MAAVJ,GAA2B,MAATE,IACtBF,EAAOQ,KAAK,iBAAiB,SAAAC,GAC3BP,EAAMQ,YAAYD,GAClBP,EAAMS,YAIRX,EAAOY,KAAK,eAAgBhB,MAE1B,CAACI,EAAQE,EAAON,IAEpBQ,qBAAU,WACR,GAAc,MAAVJ,GAA2B,MAATE,EAAtB,CAEA,IAAMW,EAAWC,aAAY,WAC3Bd,EAAOY,KAAK,gBAAiBV,EAAMa,iBA9ChB,KAiDrB,OAAO,WACLC,cAAcH,OAEhB,CAACb,EAAQE,IAEXE,qBAAU,WACR,GAAc,MAAVJ,GAA2B,MAATE,EAAtB,CAEA,IAAMe,EAAU,SAAAC,GACdhB,EAAMiB,eAAeD,IAKvB,OAFAlB,EAAOoB,GAAG,kBAAmBH,GAEtB,WACLjB,EAAOqB,IAAI,kBAAmBJ,OAE/B,CAACjB,EAAQE,IAGZE,qBAAU,WACR,GAAc,MAAVJ,GAA2B,MAATE,EAAtB,CAEA,IAAMe,EAAU,SAACC,EAAOI,EAAUC,GACjB,SAAXA,GACJvB,EAAOY,KAAK,eAAgBM,IAK9B,OAFAhB,EAAMkB,GAAG,cAAeH,GAEjB,WACLf,EAAMmB,IAAI,cAAcJ,OAE1B,CAACjB,EAAQE,IAEX,IAAMsB,EAAaC,uBAAY,SAACC,GAC9B,GAAe,MAAXA,EAAJ,CAEAA,EAAQC,UAAY,GACpB,IAAMC,EAASnB,SAASoB,cAAc,OAEtCH,EAAQI,OAAOF,GAEf,IAAMG,EAAI,IAAIC,IAAMJ,EAAQ,CAAEK,MAAO,OAAQC,QAAS,CAAEC,QAAS/C,KACjE2C,EAAEK,UACFL,EAAEM,QAAQ,cACVlC,EAAS4B,MACR,IACH,OAAO,qBAAKO,UAAU,4BAA4BC,IAAKf,K,gBCrF1CgB,MAff,WACE,OACE,cAAC,IAAD,UACE,eAAC,IAAD,WACE,cAAC,IAAD,CAAOC,KAAK,IAAIC,OAAK,EAArB,SACE,cAAC,IAAD,CAAUC,GAAE,qBAAgBC,mBAE9B,cAAC,IAAD,CAAOH,KAAK,iBAAZ,SACE,cAAC,EAAD,YCAKI,EAZS,SAAAC,GAClBA,GAAeA,aAAuBC,UACxC,6BAAqBC,MAAK,YAAkD,IAA/CC,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAON,GACPO,EAAQP,O,MCAdQ,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,MAEF/C,SAASgD,eAAe,SAM1BZ,M","file":"static/js/main.f40e8019.chunk.js","sourcesContent":["import React, { useCallback, useEffect, useState } from \"react\";\nimport Quill from \"quill\";\nimport \"quill/dist/quill.snow.css\";\nimport { io } from \"socket.io-client\";\nimport { useParams } from \"react-router-dom\"\n\n\nconst SAVE_INTERVAL_MS = 2000;\n\nconst TOOLBAR_OPTIONS = [\n  [{ header: [1, 2, 3, 4, 5, 6, false] }],\n  [{ font: [] }],\n  [{ list: \"ordered\" }, { list: \"bullet\" }],\n  [\"bold\", \"italic\", \"underline\"],\n  [{ color: [] }, { background: [] }],\n  [{ align: [] }],\n  [\"image\", \"blockquote\", \"code-block\"],\n  [\"clean\"],\n];\n\nfunction TextEditor() {\n  const { id: documentId } = useParams();\n  \n  const [socket, setSocket] = useState();\n\n  const [quill, setQuill] = useState();\n\n\n  \n  useEffect(() => {\n    const s = io(\"http://localhost:3001\");\n    setSocket(s);\n    return () => {\n      s.disconnect();\n    };\n  }, []);\n\n   useEffect(() => {\n    if (socket == null || quill == null) return;\n    socket.once(\"load-document\", document => {\n      quill.setContents(document)\n      quill.enable()\n    })\n\n\n    socket.emit('get-document', documentId)\n\n    },[socket, quill, documentId])\n  \n  useEffect(() => {\n    if (socket == null || quill == null) return;\n\n    const interval = setInterval(() => {\n      socket.emit(\"save-document\", quill.getContents())\n    }, SAVE_INTERVAL_MS)\n\n    return () => {\n      clearInterval(interval)\n    }\n  },[socket, quill])\n\n  useEffect(() => {\n    if (socket == null || quill == null) return;\n\n    const handler = delta => {\n      quill.updateContents(delta);\n    };\n\n    socket.on(\"receive-changes\", handler);\n\n    return () => {\n      socket.off(\"receive-changes\", handler);\n    };\n  }, [socket, quill]);\n\n\n  useEffect(() => {\n    if (socket == null || quill == null) return;\n    \n    const handler = (delta, oldDelta, source) => {\n      if (source !== \"user\") return;\n      socket.emit(\"send-changes\", delta);\n    };\n\n    quill.on('text-change', handler);\n\n    return () => {\n      quill.off('text-change',handler);\n    }\n  },[socket, quill]);\n\n  const wrapperRef = useCallback((wrapper) => {\n    if (wrapper == null) return;\n\n    wrapper.innerHTML = \"\";\n    const editor = document.createElement(\"div\");\n\n    wrapper.append(editor);\n\n    const q = new Quill(editor, { theme: \"snow\", modules: { toolbar: TOOLBAR_OPTIONS } });\n    q.disable()\n    q.setText('Loading...')\n    setQuill(q)\n  }, []);\n  return <div className=\"container container-fluid\" ref={wrapperRef}></div>;\n}\n\nexport default TextEditor;\n","import TextEditor from \"./TextEditor\";\nimport { BrowserRouter as Router, Switch, Route, Redirect } from 'react-router-dom';\nimport {v4 as uuidV4} from 'uuid'\n\nfunction App() {\n  return (\n    <Router>\n      <Switch>\n        <Route path=\"/\" exact>\n          <Redirect to={`/documents/${uuidV4()}`} />\n        </Route>\n        <Route path=\"/documents/:id\">\n          <TextEditor />\n        </Route>\n      </Switch>\n    </Router>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport \"./styles.css\"\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}