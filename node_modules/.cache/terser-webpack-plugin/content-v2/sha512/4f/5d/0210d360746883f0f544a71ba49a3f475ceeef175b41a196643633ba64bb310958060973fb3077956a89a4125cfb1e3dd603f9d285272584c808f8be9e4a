{"code":"(this.webpackJsonpgdocs=this.webpackJsonpgdocs||[]).push([[0],{89:function(e,t,n){},90:function(e,t,n){\"use strict\";n.r(t);var c=n(0),o=n.n(c),u=n(46),i=n.n(u),a=n(27),l=n(47),r=n.n(l),s=(n(57),n(48)),f=n(1),d=n(3),b=[[{header:[1,2,3,4,5,6,!1]}],[{font:[]}],[{list:\"ordered\"},{list:\"bullet\"}],[\"bold\",\"italic\",\"underline\"],[{color:[]},{background:[]}],[{align:[]}],[\"image\",\"blockquote\",\"code-block\"],[\"clean\"]];var j=function(){var e=Object(f.g)().id,t=Object(c.useState)(),n=Object(a.a)(t,2),o=n[0],u=n[1],i=Object(c.useState)(),l=Object(a.a)(i,2),j=l[0],O=l[1];Object(c.useEffect)((function(){var e=Object(s.io)(\"http://localhost:3001\");return u(e),function(){e.disconnect()}}),[]),Object(c.useEffect)((function(){null!=o&&null!=j&&(o.once(\"load-document\",(function(e){j.setContents(e),j.enable()})),o.emit(\"get-document\",e))}),[o,j,e]),Object(c.useEffect)((function(){if(null!=o&&null!=j){var e=setInterval((function(){o.emit(\"save-document\",j.getContents())}),2e3);return function(){clearInterval(e)}}}),[o,j]),Object(c.useEffect)((function(){if(null!=o&&null!=j){var e=function(e){j.updateContents(e)};return o.on(\"receive-changes\",e),function(){o.off(\"receive-changes\",e)}}}),[o,j]),Object(c.useEffect)((function(){if(null!=o&&null!=j){var e=function(e,t,n){\"user\"===n&&o.emit(\"send-changes\",e)};return j.on(\"text-change\",e),function(){j.off(\"text-change\",e)}}}),[o,j]);var h=Object(c.useCallback)((function(e){if(null!=e){e.innerHTML=\"\";var t=document.createElement(\"div\");e.append(t);var n=new r.a(t,{theme:\"snow\",modules:{toolbar:b}});n.disable(),n.setText(\"Loading...\"),O(n)}}),[]);return Object(d.jsx)(\"div\",{className:\"container container-fluid\",ref:h})},O=n(24),h=n(92);var g=function(){return Object(d.jsx)(O.a,{children:Object(d.jsxs)(f.d,{children:[Object(d.jsx)(f.b,{path:\"/\",exact:!0,children:Object(d.jsx)(f.a,{to:\"/documents/\".concat(Object(h.a)())})}),Object(d.jsx)(f.b,{path:\"/documents/:id\",children:Object(d.jsx)(j,{})})]})})},v=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,93)).then((function(t){var n=t.getCLS,c=t.getFID,o=t.getFCP,u=t.getLCP,i=t.getTTFB;n(e),c(e),o(e),u(e),i(e)}))};n(89);i.a.render(Object(d.jsx)(o.a.StrictMode,{children:Object(d.jsx)(g,{})}),document.getElementById(\"root\")),v()}},[[90,1,2]]]);","name":"static/js/main.f40e8019.chunk.js","map":{"version":3,"sources":["static/js/main.f40e8019.chunk.js"],"names":["this","push","89","module","exports","__webpack_require__","90","__webpack_exports__","r","react","react_default","n","react_dom","react_dom_default","slicedToArray","dist_quill","quill_default","build","react_router","jsx_runtime","TOOLBAR_OPTIONS","header","font","list","color","background","align","src_TextEditor","documentId","Object","id","_useState","_useState2","socket","setSocket","_useState3","_useState4","quill","setQuill","s","disconnect","once","document","setContents","enable","emit","interval","setInterval","getContents","clearInterval","handler","delta","updateContents","on","off","oldDelta","source","wrapperRef","wrapper","innerHTML","editor","createElement","append","q","a","theme","modules","toolbar","disable","setText","className","ref","react_router_dom","v4","src_App","children","path","exact","to","concat","src_reportWebVitals","onPerfEntry","Function","e","then","bind","_ref","getCLS","getFID","getFCP","getLCP","getTTFB","render","StrictMode","getElementById"],"mappings":"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"},"input":"(this[\"webpackJsonpgdocs\"] = this[\"webpackJsonpgdocs\"] || []).push([[0],{\n\n/***/ 89:\n/***/ (function(module, exports, __webpack_require__) {\n\n// extracted by mini-css-extract-plugin\n\n/***/ }),\n\n/***/ 90:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// EXTERNAL MODULE: ./node_modules/react/index.js\nvar react = __webpack_require__(0);\nvar react_default = /*#__PURE__*/__webpack_require__.n(react);\n\n// EXTERNAL MODULE: ./node_modules/react-dom/index.js\nvar react_dom = __webpack_require__(46);\nvar react_dom_default = /*#__PURE__*/__webpack_require__.n(react_dom);\n\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js + 5 modules\nvar slicedToArray = __webpack_require__(27);\n\n// EXTERNAL MODULE: ./node_modules/quill/dist/quill.js\nvar dist_quill = __webpack_require__(47);\nvar quill_default = /*#__PURE__*/__webpack_require__.n(dist_quill);\n\n// EXTERNAL MODULE: ./node_modules/quill/dist/quill.snow.css\nvar quill_snow = __webpack_require__(57);\n\n// EXTERNAL MODULE: ./node_modules/socket.io-client/build/index.js\nvar build = __webpack_require__(48);\n\n// EXTERNAL MODULE: ./node_modules/react-router/esm/react-router.js\nvar react_router = __webpack_require__(1);\n\n// EXTERNAL MODULE: ./node_modules/react/jsx-runtime.js\nvar jsx_runtime = __webpack_require__(3);\n\n// CONCATENATED MODULE: ./src/TextEditor.js\nvar SAVE_INTERVAL_MS=2000;var TOOLBAR_OPTIONS=[[{header:[1,2,3,4,5,6,false]}],[{font:[]}],[{list:\"ordered\"},{list:\"bullet\"}],[\"bold\",\"italic\",\"underline\"],[{color:[]},{background:[]}],[{align:[]}],[\"image\",\"blockquote\",\"code-block\"],[\"clean\"]];function TextEditor(){var _useParams=Object(react_router[\"g\" /* useParams */])(),documentId=_useParams.id;var _useState=Object(react[\"useState\"])(),_useState2=Object(slicedToArray[\"a\" /* default */])(_useState,2),socket=_useState2[0],setSocket=_useState2[1];var _useState3=Object(react[\"useState\"])(),_useState4=Object(slicedToArray[\"a\" /* default */])(_useState3,2),quill=_useState4[0],setQuill=_useState4[1];Object(react[\"useEffect\"])(function(){var s=Object(build[\"io\"])(\"http://localhost:3001\");setSocket(s);return function(){s.disconnect();};},[]);Object(react[\"useEffect\"])(function(){if(socket==null||quill==null)return;socket.once(\"load-document\",function(document){quill.setContents(document);quill.enable();});socket.emit('get-document',documentId);},[socket,quill,documentId]);Object(react[\"useEffect\"])(function(){if(socket==null||quill==null)return;var interval=setInterval(function(){socket.emit(\"save-document\",quill.getContents());},SAVE_INTERVAL_MS);return function(){clearInterval(interval);};},[socket,quill]);Object(react[\"useEffect\"])(function(){if(socket==null||quill==null)return;var handler=function handler(delta){quill.updateContents(delta);};socket.on(\"receive-changes\",handler);return function(){socket.off(\"receive-changes\",handler);};},[socket,quill]);Object(react[\"useEffect\"])(function(){if(socket==null||quill==null)return;var handler=function handler(delta,oldDelta,source){if(source!==\"user\")return;socket.emit(\"send-changes\",delta);};quill.on('text-change',handler);return function(){quill.off('text-change',handler);};},[socket,quill]);var wrapperRef=Object(react[\"useCallback\"])(function(wrapper){if(wrapper==null)return;wrapper.innerHTML=\"\";var editor=document.createElement(\"div\");wrapper.append(editor);var q=new quill_default.a(editor,{theme:\"snow\",modules:{toolbar:TOOLBAR_OPTIONS}});q.disable();q.setText('Loading...');setQuill(q);},[]);return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"container container-fluid\",ref:wrapperRef});}/* harmony default export */ var src_TextEditor = (TextEditor);\n// EXTERNAL MODULE: ./node_modules/react-router-dom/esm/react-router-dom.js\nvar react_router_dom = __webpack_require__(24);\n\n// EXTERNAL MODULE: ./node_modules/uuid/dist/esm-browser/v4.js + 4 modules\nvar v4 = __webpack_require__(92);\n\n// CONCATENATED MODULE: ./src/App.js\nfunction App(){return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_router_dom[\"a\" /* BrowserRouter */],{children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(react_router[\"d\" /* Switch */],{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_router[\"b\" /* Route */],{path:\"/\",exact:true,children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_router[\"a\" /* Redirect */],{to:\"/documents/\".concat(Object(v4[\"a\" /* default */])())})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_router[\"b\" /* Route */],{path:\"/documents/:id\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(src_TextEditor,{})})]})});}/* harmony default export */ var src_App = (App);\n// CONCATENATED MODULE: ./src/reportWebVitals.js\nvar reportWebVitals=function reportWebVitals(onPerfEntry){if(onPerfEntry&&onPerfEntry instanceof Function){__webpack_require__.e(/* import() */ 3).then(__webpack_require__.bind(null, 93)).then(function(_ref){var getCLS=_ref.getCLS,getFID=_ref.getFID,getFCP=_ref.getFCP,getLCP=_ref.getLCP,getTTFB=_ref.getTTFB;getCLS(onPerfEntry);getFID(onPerfEntry);getFCP(onPerfEntry);getLCP(onPerfEntry);getTTFB(onPerfEntry);});}};/* harmony default export */ var src_reportWebVitals = (reportWebVitals);\n// EXTERNAL MODULE: ./src/styles.css\nvar styles = __webpack_require__(89);\n\n// CONCATENATED MODULE: ./src/index.js\nreact_dom_default.a.render(/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_default.a.StrictMode,{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(src_App,{})}),document.getElementById('root'));// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nsrc_reportWebVitals();\n\n/***/ })\n\n},[[90,1,2]]]);","inputSourceMap":{"version":3,"sources":["/home/laukey/Documents/phase 3/g-docs deploy/g-docs/client/node_modules/mini-css-extract-plugin/dist/loader.js??ref--5-oneOf-4-0!/home/laukey/Documents/phase 3/g-docs deploy/g-docs/client/node_modules/css-loader/dist/cjs.js??ref--5-oneOf-4-1!/home/laukey/Documents/phase 3/g-docs deploy/g-docs/client/node_modules/postcss-loader/src/index.js??postcss!/home/laukey/Documents/phase 3/g-docs deploy/g-docs/client/src/styles.css","/home/laukey/Documents/phase 3/g-docs deploy/g-docs/client/src/TextEditor.js","/home/laukey/Documents/phase 3/g-docs deploy/g-docs/client/src/App.js","/home/laukey/Documents/phase 3/g-docs deploy/g-docs/client/src/reportWebVitals.js","/home/laukey/Documents/phase 3/g-docs deploy/g-docs/client/src/index.js"],"names":["SAVE_INTERVAL_MS","TOOLBAR_OPTIONS","header","font","list","color","background","align","TextEditor","useParams","documentId","id","useState","socket","setSocket","quill","setQuill","useEffect","s","io","disconnect","once","document","setContents","enable","emit","interval","setInterval","getContents","clearInterval","handler","delta","updateContents","on","off","oldDelta","source","wrapperRef","useCallback","wrapper","innerHTML","editor","createElement","append","q","Quill","theme","modules","toolbar","disable","setText","App","uuidV4","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","getElementById"],"mappings":";;;;;AAAA,uC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACOA,GAAMA,iBAAgB,CAAG,IAAzB,CAEA,GAAMC,gBAAe,CAAG,CACtB,CAAC,CAAEC,MAAM,CAAE,CAAC,CAAD,CAAI,CAAJ,CAAO,CAAP,CAAU,CAAV,CAAa,CAAb,CAAgB,CAAhB,CAAmB,KAAnB,CAAV,CAAD,CADsB,CAEtB,CAAC,CAAEC,IAAI,CAAE,EAAR,CAAD,CAFsB,CAGtB,CAAC,CAAEC,IAAI,CAAE,SAAR,CAAD,CAAsB,CAAEA,IAAI,CAAE,QAAR,CAAtB,CAHsB,CAItB,CAAC,MAAD,CAAS,QAAT,CAAmB,WAAnB,CAJsB,CAKtB,CAAC,CAAEC,KAAK,CAAE,EAAT,CAAD,CAAgB,CAAEC,UAAU,CAAE,EAAd,CAAhB,CALsB,CAMtB,CAAC,CAAEC,KAAK,CAAE,EAAT,CAAD,CANsB,CAOtB,CAAC,OAAD,CAAU,YAAV,CAAwB,YAAxB,CAPsB,CAQtB,CAAC,OAAD,CARsB,CAAxB,CAWA,QAASC,WAAT,EAAsB,CACpB,eAA2BC,yCAAS,EAApC,CAAYC,UAAZ,YAAQC,EAAR,CAEA,cAA4BC,yBAAQ,EAApC,kEAAOC,MAAP,eAAeC,SAAf,eAEA,eAA0BF,yBAAQ,EAAlC,mEAAOG,KAAP,eAAcC,QAAd,eAIAC,0BAAS,CAAC,UAAM,CACd,GAAMC,EAAC,CAAGC,mBAAE,CAAC,uBAAD,CAAZ,CACAL,SAAS,CAACI,CAAD,CAAT,CACA,MAAO,WAAM,CACXA,CAAC,CAACE,UAAF,GACD,CAFD,CAGD,CANQ,CAMN,EANM,CAAT,CAQCH,0BAAS,CAAC,UAAM,CACf,GAAIJ,MAAM,EAAI,IAAV,EAAkBE,KAAK,EAAI,IAA/B,CAAqC,OACrCF,MAAM,CAACQ,IAAP,CAAY,eAAZ,CAA6B,SAAAC,QAAQ,CAAI,CACvCP,KAAK,CAACQ,WAAN,CAAkBD,QAAlB,EACAP,KAAK,CAACS,MAAN,GACD,CAHD,EAMAX,MAAM,CAACY,IAAP,CAAY,cAAZ,CAA4Bf,UAA5B,EAEC,CAVO,CAUN,CAACG,MAAD,CAASE,KAAT,CAAgBL,UAAhB,CAVM,CAAT,CAYDO,0BAAS,CAAC,UAAM,CACd,GAAIJ,MAAM,EAAI,IAAV,EAAkBE,KAAK,EAAI,IAA/B,CAAqC,OAErC,GAAMW,SAAQ,CAAGC,WAAW,CAAC,UAAM,CACjCd,MAAM,CAACY,IAAP,CAAY,eAAZ,CAA6BV,KAAK,CAACa,WAAN,EAA7B,EACD,CAF2B,CAEzB5B,gBAFyB,CAA5B,CAIA,MAAO,WAAM,CACX6B,aAAa,CAACH,QAAD,CAAb,CACD,CAFD,CAGD,CAVQ,CAUP,CAACb,MAAD,CAASE,KAAT,CAVO,CAAT,CAYAE,0BAAS,CAAC,UAAM,CACd,GAAIJ,MAAM,EAAI,IAAV,EAAkBE,KAAK,EAAI,IAA/B,CAAqC,OAErC,GAAMe,QAAO,CAAG,QAAVA,QAAU,CAAAC,KAAK,CAAI,CACvBhB,KAAK,CAACiB,cAAN,CAAqBD,KAArB,EACD,CAFD,CAIAlB,MAAM,CAACoB,EAAP,CAAU,iBAAV,CAA6BH,OAA7B,EAEA,MAAO,WAAM,CACXjB,MAAM,CAACqB,GAAP,CAAW,iBAAX,CAA8BJ,OAA9B,EACD,CAFD,CAGD,CAZQ,CAYN,CAACjB,MAAD,CAASE,KAAT,CAZM,CAAT,CAeAE,0BAAS,CAAC,UAAM,CACd,GAAIJ,MAAM,EAAI,IAAV,EAAkBE,KAAK,EAAI,IAA/B,CAAqC,OAErC,GAAMe,QAAO,CAAG,QAAVA,QAAU,CAACC,KAAD,CAAQI,QAAR,CAAkBC,MAAlB,CAA6B,CAC3C,GAAIA,MAAM,GAAK,MAAf,CAAuB,OACvBvB,MAAM,CAACY,IAAP,CAAY,cAAZ,CAA4BM,KAA5B,EACD,CAHD,CAKAhB,KAAK,CAACkB,EAAN,CAAS,aAAT,CAAwBH,OAAxB,EAEA,MAAO,WAAM,CACXf,KAAK,CAACmB,GAAN,CAAU,aAAV,CAAwBJ,OAAxB,EACD,CAFD,CAGD,CAbQ,CAaP,CAACjB,MAAD,CAASE,KAAT,CAbO,CAAT,CAeA,GAAMsB,WAAU,CAAGC,4BAAW,CAAC,SAACC,OAAD,CAAa,CAC1C,GAAIA,OAAO,EAAI,IAAf,CAAqB,OAErBA,OAAO,CAACC,SAAR,CAAoB,EAApB,CACA,GAAMC,OAAM,CAAGnB,QAAQ,CAACoB,aAAT,CAAuB,KAAvB,CAAf,CAEAH,OAAO,CAACI,MAAR,CAAeF,MAAf,EAEA,GAAMG,EAAC,CAAG,GAAIC,gBAAJ,CAAUJ,MAAV,CAAkB,CAAEK,KAAK,CAAE,MAAT,CAAiBC,OAAO,CAAE,CAAEC,OAAO,CAAE/C,eAAX,CAA1B,CAAlB,CAAV,CACA2C,CAAC,CAACK,OAAF,GACAL,CAAC,CAACM,OAAF,CAAU,YAAV,EACAlC,QAAQ,CAAC4B,CAAD,CAAR,CACD,CAZ6B,CAY3B,EAZ2B,CAA9B,CAaA,mBAAO,kCAAK,SAAS,CAAC,2BAAf,CAA2C,GAAG,CAAEP,UAAhD,EAAP,CACD,CAEc7B,6DAAf,E;;;;;;;;ACvGA,QAAS2C,IAAT,EAAe,CACb,mBACE,2BAAC,yCAAD,wBACE,4BAAC,8BAAD,yBACE,2BAAC,6BAAD,EAAO,IAAI,CAAC,GAAZ,CAAgB,KAAK,KAArB,uBACE,2BAAC,gCAAD,EAAU,EAAE,sBAAgBC,6BAAM,EAAtB,CAAZ,EADF,EADF,cAIE,2BAAC,6BAAD,EAAO,IAAI,CAAC,gBAAZ,uBACE,2BAAC,cAAD,IADF,EAJF,GADF,EADF,CAYD,CAEcD,+CAAf,E;;ACnBA,GAAME,gBAAe,CAAG,QAAlBA,gBAAkB,CAAAC,WAAW,CAAI,CACrC,GAAIA,WAAW,EAAIA,WAAW,WAAYC,SAA1C,CAAoD,CAClD,iFAAqBC,IAArB,CAA0B,cAAiD,IAA9CC,OAA8C,MAA9CA,MAA8C,CAAtCC,MAAsC,MAAtCA,MAAsC,CAA9BC,MAA8B,MAA9BA,MAA8B,CAAtBC,MAAsB,MAAtBA,MAAsB,CAAdC,OAAc,MAAdA,OAAc,CACzEJ,MAAM,CAACH,WAAD,CAAN,CACAI,MAAM,CAACJ,WAAD,CAAN,CACAK,MAAM,CAACL,WAAD,CAAN,CACAM,MAAM,CAACN,WAAD,CAAN,CACAO,OAAO,CAACP,WAAD,CAAP,CACD,CAND,EAOD,CACF,CAVD,CAYeD,uEAAf,E;;;;;ACLAS,mBAAQ,CAACC,MAAT,cACE,2BAAC,eAAD,CAAO,UAAP,wBACE,2BAAC,OAAD,IADF,EADF,CAIEzC,QAAQ,CAAC0C,cAAT,CAAwB,MAAxB,CAJF,EAOA;AACA;AACA;AACAX,mBAAe,G","file":"x","sourcesContent":["// extracted by mini-css-extract-plugin","import React, { useCallback, useEffect, useState } from \"react\";\nimport Quill from \"quill\";\nimport \"quill/dist/quill.snow.css\";\nimport { io } from \"socket.io-client\";\nimport { useParams } from \"react-router-dom\"\n\n\nconst SAVE_INTERVAL_MS = 2000;\n\nconst TOOLBAR_OPTIONS = [\n  [{ header: [1, 2, 3, 4, 5, 6, false] }],\n  [{ font: [] }],\n  [{ list: \"ordered\" }, { list: \"bullet\" }],\n  [\"bold\", \"italic\", \"underline\"],\n  [{ color: [] }, { background: [] }],\n  [{ align: [] }],\n  [\"image\", \"blockquote\", \"code-block\"],\n  [\"clean\"],\n];\n\nfunction TextEditor() {\n  const { id: documentId } = useParams();\n  \n  const [socket, setSocket] = useState();\n\n  const [quill, setQuill] = useState();\n\n\n  \n  useEffect(() => {\n    const s = io(\"http://localhost:3001\");\n    setSocket(s);\n    return () => {\n      s.disconnect();\n    };\n  }, []);\n\n   useEffect(() => {\n    if (socket == null || quill == null) return;\n    socket.once(\"load-document\", document => {\n      quill.setContents(document)\n      quill.enable()\n    })\n\n\n    socket.emit('get-document', documentId)\n\n    },[socket, quill, documentId])\n  \n  useEffect(() => {\n    if (socket == null || quill == null) return;\n\n    const interval = setInterval(() => {\n      socket.emit(\"save-document\", quill.getContents())\n    }, SAVE_INTERVAL_MS)\n\n    return () => {\n      clearInterval(interval)\n    }\n  },[socket, quill])\n\n  useEffect(() => {\n    if (socket == null || quill == null) return;\n\n    const handler = delta => {\n      quill.updateContents(delta);\n    };\n\n    socket.on(\"receive-changes\", handler);\n\n    return () => {\n      socket.off(\"receive-changes\", handler);\n    };\n  }, [socket, quill]);\n\n\n  useEffect(() => {\n    if (socket == null || quill == null) return;\n    \n    const handler = (delta, oldDelta, source) => {\n      if (source !== \"user\") return;\n      socket.emit(\"send-changes\", delta);\n    };\n\n    quill.on('text-change', handler);\n\n    return () => {\n      quill.off('text-change',handler);\n    }\n  },[socket, quill]);\n\n  const wrapperRef = useCallback((wrapper) => {\n    if (wrapper == null) return;\n\n    wrapper.innerHTML = \"\";\n    const editor = document.createElement(\"div\");\n\n    wrapper.append(editor);\n\n    const q = new Quill(editor, { theme: \"snow\", modules: { toolbar: TOOLBAR_OPTIONS } });\n    q.disable()\n    q.setText('Loading...')\n    setQuill(q)\n  }, []);\n  return <div className=\"container container-fluid\" ref={wrapperRef}></div>;\n}\n\nexport default TextEditor;\n","import TextEditor from \"./TextEditor\";\nimport { BrowserRouter as Router, Switch, Route, Redirect } from 'react-router-dom';\nimport {v4 as uuidV4} from 'uuid'\n\nfunction App() {\n  return (\n    <Router>\n      <Switch>\n        <Route path=\"/\" exact>\n          <Redirect to={`/documents/${uuidV4()}`} />\n        </Route>\n        <Route path=\"/documents/:id\">\n          <TextEditor />\n        </Route>\n      </Switch>\n    </Router>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport \"./styles.css\"\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"]}}